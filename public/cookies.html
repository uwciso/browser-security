<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />
  <title>Browser Security Exercises</title>
</head>
<body>

  <div class="banner main">
    <h1>Safer Cookies<span class="resource"><a href="index.html">All Exercises</a></span></h1>
  </div>

  <div class="instr-header">
    <h2>Instructions</h2>
    <ol>
      <li>
        Open the app.js file in a text editor. For these exercises, you'll be editing the <a href="https://github.com/uwciso/browser-security/blob/master/app.js#L26-L28" target="0"><code>cookie_directives</code></a> object. (Refer to the <a href="https://expressjs.com/en/4x/api.html#res.cookie" target="0">Express docs</a> for syntax guidance)</li>
      <li>On another browser tab, open the <a href="assets.html" target="_blank">assets page</a> along with Dev Tools.
      </li>
    </ol>
  </div>
  <ol>
    <li>
      <p>Note that on the initial response of the assets page, this app sets a 'foo' cookie with a value of 'bar'.</p> 
      <p>In the Dev Tools console, use JavaScript to access this cookie.</p>
      <p>Now, add the appropriate directive to the cookie to prevent this type of access.</p>
      <p>Reload the assets page and try accessing the cookie again through the console.</p>
    </li>
    <li>
      <p>Verify that the cookie is sent by the browser on subsequent requests to local (same-origin) resources (such as this page's stylesheet or local image).</p>
      <p>Now, disallow this cookie from being sent on requests <i>not</i> over https.</p>
      <p>Reload the assets page, then check those same requests to verify this cookie was not sent (since this app is making those local requests over http rather than https).</p>
    </li>
    <li>
      <p>Tighten the scoping of this cookie by making sure it's <i>only</i> sent on requests to the assets.html page.</p>
    </li>
    <li>
      <p>Ensure that this cookie won't be sent along with any cross-site (third party) requests.<p>
    </li>
    <li>
      <p>Finally, give this cookie an expiration date one minute from now. Note that Express expects the value of the "expires" key to be of <a href="https://expressjs.com/en/4x/api.html#res.cookie" target="0">type Date</a>). 
    </li>
      <p>Reload the assets page and check that the set cookie shows this expiration date. Wait more than a minute then reload the page again. Was the cookie sent on the request?</p>
    </li>
  </ol>
  <h2>Resources</h2>
  <ul>
    <li>
      <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie" target="0">MDN on setting cookies</a>
    </li>
    <li>
      <a href="https://expressjs.com/en/4x/api.html#res.cookie"target="0">Using cookies with Express.js</a> 
    </li>
  </ul>
  <h2>Solutions</h2>
  <p>View the <a href="https://github.com/uwciso/browser-security/blob/master/solutions.md" target="0">solutions.md</a> file.</p>
</body>
</html>
